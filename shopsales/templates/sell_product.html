{% extends 'base.html' %}
{% load static %}  <!-- ‡πÇ‡∏´‡∏•‡∏î Static ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ Django ‡∏´‡∏≤‡πÑ‡∏ü‡∏•‡πå JS ‡πÑ‡∏î‡πâ -->

{% block title %}‡∏£‡∏∞‡∏ö‡∏ö‡∏Ç‡∏≤‡∏¢‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤{% endblock %}

{% block content %}
<div class="header">‡∏£‡∏∞‡∏ö‡∏ö‡∏Ç‡∏≤‡∏¢‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</div>
<div class="main-container">
    <div class="barcode-container">
        <input type="text" id="barcode-input" onkeydown="scanBarcode(event)" placeholder="‡∏™‡πÅ‡∏Å‡∏ô‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà" autofocus>
        <button onclick="manualScan()">üîç ‡∏Å‡∏£‡∏≠‡∏Å‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î</button>
    </div>

    <table id="cart">
        <thead>
            <tr>
                <th>‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
                <th>‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
                <th>‡∏£‡∏≤‡∏Ñ‡∏≤</th>
                <th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
                <th>‡∏£‡∏ß‡∏°‡πÄ‡∏á‡∏¥‡∏ô</th>
                <th>‡∏•‡∏ö</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <div class="summary">
        <span>‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°:</span>
        <span class="total"><span id="total-price">0.00</span> ‡∏ö‡∏≤‡∏ó</span>
    </div>

    <div class="buttons">
        <button class="clear" onclick="clearCart()">üóëÔ∏è ‡∏•‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</button>
        <button class="checkout" onclick="openPaymentModal()">üí∞ ‡∏Ñ‡∏¥‡∏î‡πÄ‡∏á‡∏¥‡∏ô</button>
    </div>

    <div class="details">
        <p>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£: <span id="item-count">0</span></p>
    </div>
</div>

<!-- ‚úÖ Modal ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏à‡∏≤‡∏Å‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ -->
<div id="payment-modal" class="modal">
    <div class="modal-content">
        <h2>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</h2>
        <table id="payment-summary">
            <thead>
                <tr>
                    <th>‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
                    <th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
                    <th>‡∏£‡∏≤‡∏Ñ‡∏≤</th>
                    <th>‡∏£‡∏ß‡∏°</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
        <p><strong>‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°:</strong> <span id="payment-total">0</span> ‡∏ö‡∏≤‡∏ó</p>
        <label for="received-amount">‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏à‡∏≤‡∏Å‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤:</label>
        <input type="number" id="received-amount" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö" oninput="calculateChange()">
        <div>
            <button onclick="setReceivedAmount(100)">100 ‡∏ö‡∏≤‡∏ó</button>
            <button onclick="setReceivedAmount(500)">500 ‡∏ö‡∏≤‡∏ó</button>
            <button onclick="setReceivedAmount(1000)">1000 ‡∏ö‡∏≤‡∏ó</button>
            <button onclick="setReceivedAmount(getTotalAmount())">‡∏£‡∏±‡∏ö‡∏û‡∏≠‡∏î‡∏µ</button>
        </div>
        <p><strong>‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏≠‡∏ô:</strong> <span id="change-amount">0</span> ‡∏ö‡∏≤‡∏ó</p>
        <button onclick="confirmCheckout()">‚úÖ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢</button>
        <button onclick="closePaymentModal()">‚ùå ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
    </div>
</div>

<!-- ‚úÖ CSS ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Modal -->
<style>
    .modal {
        display: none;
        position: fixed;
        z-index: 1;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
    }
    .modal-content {
        background-color: white;
        padding: 20px;
        margin: 10% auto;
        width: 50%;
        text-align: center;
        border-radius: 10px;
    }
    table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 15px;
    }
    table th, table td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: center;
    }
    input {
        padding: 8px;
        width: 50%;
        margin: 10px 0;
        font-size: 16px;
    }
    #payment-modal button {
    font-size: 15px;
    padding: 10px 20px;
    border-radius: 10px; /* ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Ç‡∏≠‡∏ö‡∏°‡∏ô */
    background-color: #007bff; /* ‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏õ‡∏∏‡πà‡∏° */
    color: white; /* ‡∏™‡∏µ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£ */
    border: none; /* ‡πÄ‡∏≠‡∏≤‡∏Ç‡∏≠‡∏ö‡∏≠‡∏≠‡∏Å */
    cursor: pointer; /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏°‡∏≤‡∏™‡πå‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏π‡∏õ‡∏°‡∏∑‡∏≠ */
    transition: 0.3s; /* ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏•‡∏∑‡πà‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô */
    margin-top: 15px; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô */
    }
    #change-amount {
    font-size: 30px; /* ‡∏Ç‡∏¢‡∏≤‡∏¢‡∏Ç‡∏ô‡∏≤‡∏î‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡πÉ‡∏´‡πâ‡πÉ‡∏´‡∏ç‡πà‡∏Ç‡∏∂‡πâ‡∏ô */
    font-weight: bold; /* ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ï‡∏±‡∏ß‡∏´‡∏ô‡∏≤ */
    color: #ff5722; /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πâ‡∏°‡πÅ‡∏î‡∏á ‡πÉ‡∏´‡πâ‡∏°‡∏≠‡∏á‡πÄ‡∏´‡πá‡∏ô‡∏ä‡∏±‡∏î */
    display: block; /* ‡πÉ‡∏´‡πâ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÄ‡∏õ‡πá‡∏ô‡∏ö‡∏•‡πá‡∏≠‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏¢‡∏Å‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏∑‡πà‡∏ô */
    margin-top: 15px; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô */
}


#payment-modal button:hover {
    background-color: #0056b3;
    box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
}

.buttons button {
    font-size: 15px; /* ‡∏Ç‡∏¢‡∏≤‡∏¢‡∏Ç‡∏ô‡∏≤‡∏î‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£ */
    padding: 7px 20px; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏ô‡∏≤‡∏î‡∏õ‡∏∏‡πà‡∏° */
    border-radius: 10px; /* ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Ç‡∏≠‡∏ö‡∏°‡∏ô */
    background-color: #58be70; /* ‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏õ‡∏∏‡πà‡∏° (‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß) */
    color: white; /* ‡∏™‡∏µ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£ */
    border: none; /* ‡πÄ‡∏≠‡∏≤‡∏Ç‡∏≠‡∏ö‡∏≠‡∏≠‡∏Å */
    cursor: pointer; /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏°‡∏≤‡∏™‡πå‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏π‡∏õ‡∏°‡∏∑‡∏≠ */
    transition: 0.3s; /* ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏•‡∏∑‡πà‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô */
    
}
.buttons button.clear {
    background-color: #dc3545; /* ‡∏™‡∏µ‡πÅ‡∏î‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏•‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ */
}
</style>

{% endblock %}

<!-- ‚úÖ ‡∏¢‡πâ‡∏≤‡∏¢ script ‡πÑ‡∏õ‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô‡∏õ‡∏¥‡∏î </body> -->
{% block extra_js %}
<script src="{% static 'js/sell_product.js' %}"></script>
<script>
    function setReceivedAmount(amount) {
        document.getElementById("received-amount").value = amount;
        calculateChange(); // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏≠‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
    }
    function getTotalAmount() {
    return parseFloat(document.getElementById("payment-total").textContent) || 0;
}
</script>
{% endblock %}
